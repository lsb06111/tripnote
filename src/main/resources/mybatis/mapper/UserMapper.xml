<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="edu.example.tripnote.dao.UserDAO">

<!-- 로그인 -->
<select id="login" resultType="UserDTO">
   select id, username, password, email, users_name, nickname, profile_image
   from users
   where username = #{username}
   AND password = #{password}
</select>

<!-- 비밀번호찾기 -->
<select id="searchPassword" resultType="string">
	select password
	from users
	where username = #{username}
	AND email = #{email}
</select>

<!-- 회원가입 -->
<insert id="insertUser" parameterType="UserDTO" useGeneratedKeys="true" keyProperty = "id" keyColumn="id">
	insert into users (username, password, email, users_name, nickname)
	values(#{username}, #{password}, #{email}, #{users_name}, #{nickname})
</insert>

<!-- 아이디 중복 확인 -->
<select id="countByUsername" parameterType="string" resultType = "int">
	select COUNT(*)
	from users
	where username = #{username}
</select>

<select id="findByUsername" resultType="edu.example.tripnote.domain.UserDTO" parameterType="string">
   SELECT id, username, password, email, users_name AS usersName, nickname, profile_image AS profileImage
   FROM users
   WHERE username = #{username}
</select>

  
</mapper>